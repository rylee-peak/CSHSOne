<html lang="en">
<head>
  <title>CSHSOne - One login for all of the Computer Science Honor Society</title>
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css" integrity="sha512-5PV92qsds/16vyYIJo3T/As4m2d8b6oWYfoqV+vtizRB6KhF1F9kYzWzQmsO6T3z3QG2Xdhrx7FQ+5R1LiQdUA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
	<style>
		.skip-to-main-content-link {
  			position: absolute;
  			left: -9999px;
  			z-index: 999;
 			padding: 1em;
  			background-color: black;
  			color: white;
  			opacity: 0;
		}
		.skip-to-main-content-link:focus {
  			left: 50%;
  			transform: translateX(-50%);
  			opacity: 1;
		}
		body {
  			background-color: yellow;
		}
	</style>
</head>
<body>
	<a href="#main" class="skip-to-main-content-link">Skip to main content</a>
  <div id="login_div" aria-label="Login Section, requires email and password" role="main" class="main-div">
    <h1 id="main">CSHSOne</h1>
    <input aria-label="Email" type="email" placeholder="Email..." id="email_field" />
    <input aria-label="Password" type="password" placeholder="Password..." id="password_field" />
	  <div class="cf-turnstile" data-sitekey="0x4AAAAAAAB0b5b1kvLgnr-R"></div> 

    <button onclick="login()">Login to Account</button>
  </div>

  <div id="user_div" class="loggedin-div">
    <h1 id="welcome">Welcome CSHS Member!</h1>
    <p id="user_para"></p>
		<button onclick="findPage()">Continue</button>
    <button onclick="logout()">Logout</button>
  </div>


  <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyB7j5DsY1wGvbDu0MLvE5qeJgZtq2OJCek",
      authDomain: "cshsone-24eb1.firebaseapp.com",
      databaseURL: "cshsone-24eb1.firebaseio.com",
      projectId: "cshsone-24eb1",
      storageBucket: "cshsone-24eb1.appspot.com",
      messagingSenderId: "466528647252"
    };
    firebase.initializeApp(config);
  </script>
  <script type = "text/javascript">
	var emailVal = user.email;
	if (emailVal == "ryleepe@gmail.com")
	{
		document.getElementById("welcome").innerHTML = "Hi, Rylee!";
	}
	else if (emailVal == "cshs@thewca.us")
	{
		document.getElementById("welcome").innerHTML = "Hi, CSHS WebDev Team!";
	}
	function findPage()
	  {
		  //var params = new URLSearchParams(window.location.search);
		  var params = new URLSearchParams(document.location.search);
		  var emailVal = user.email;
		  var name = params.get("name");
		  if (name == "myCSHS")
		  {
			  window.location.href = "https://my.one.thewca.us/authed.html?email=" + emailVal;
		  }
		  else
		  {
			  alert("No service was made available to redirect you to. We are very sorry for this inconvenience");
		  }
	  }
  </script>
  <script src="index.js"></script>

</body>
</html>
